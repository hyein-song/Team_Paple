<!-- 기존이미지 -->
<div>
    {% if value %}
        <img id='imagePreview' style="height: 100%; width: 100%"
         src='{{ value.url }}' alt="{{ value.url }}"/>
    {% endif %}

    <!-- 파일 업로드 폼 좀 더 예쁘게(선택사항) -->
    <div class="custom-file">
        <input type="file" id="{{ id }}" class="custom-file-input" name="{{ name }}" accept="image/*" style="cursor: pointer;">
    </div>

    <!-- 여기서부터 스크립트 -->
    <script>

        // 파일 선택 이벤트 등록
        var imgFieldCtrl = document.getElementById('{{ id }}')
        imgFieldCtrl.addEventListener('change', function(e) {
            if (imgFieldCtrl.files && imgFieldCtrl.files[0]) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('imagePreview').src = e.target.result;
                }

                // convert to base64 string
                reader.readAsDataURL(document.getElementById('{{ id }}').files[0]);
            }
        });
    </script>
</div>